동적 타이핑

동적 타입 언어와 정적 타입 언어

자바스크립트의 모든 값은 데이터 타입을 갖는다고 했다.
그렇다면 변수는 데이터 타입을 가질까?

C나 Java 같은 정적 타입(static/strong type)언어는 변수를 선언할 때 변수에 할당할 수 있는 값의 종류
즉, 데이터 타입을 사전에 선언해야 한다. 이를 명시적 타입 선언(explicit type declaration)이라 한다.
다음은 C에서 정수 타입의 변수를 선언하는 예이다.
```c
// c 변수에는 1바이트 정수 타입의 값(-128~127)만 할당할 수 있다.
char c ;

// num 변수에는 4바이트 정수 타입의 값(약 -21억~21억) 만 할당할 수 있다.
int num;
```

정적 타입 언어는 변수의 타입을 변경할 수 없으며, 변수에 선언한 타입에 맞는 값만 할당할 수 있다.
정적 타입 언어는 컴파일 시점에 타입 체크(선언한 데이터 타입에 맞는 값을 할당했는지 검사하는 처리)를 수행한다.

만약 타입 체크를 통과하지 못했다면 에러를 발생시키고 프로그램의 실행자체를 막는다.
이를 통해 타입의 일관성을 강제함으로써 더욱 안정적인 코드의 구현을 통해 런타임에 발생하는 에러를 줄인다.
대표적인 정적 타입 언어로 C, C++, Java, Kotlin, Go, Haskell, Rust, Scala 등이 있다.

자바스크립트는 정적 타입 언어와 다르게 변수를 선언할 때 타입을 선언하지 않는다.
다만 var, let, const 키워드를 사용해 변수를 선언할 뿐이다.
자바스크립트의 변수는 정적 타입 언어와 같이 미리 선언한 데이터 타입의 값만 할당할 수 있는 것이 아니다.
어떠한 데이터 타입의 값이라도 자유롭게 할당할 수 있다.

변수를 하나 선언하고 다양한 데이터 타입의 값을 할당한 다음 typeof 연산자로 데이터를 조사해보자.
typeof 연산자는 연산자 뒤에 위치한 피연산자의 데이터 타입을 문자열로 반환한다.
```javascript
var foo;
console.log(typeof foo); // undefined

foo = 3;
onsole.log(typeof foo); // number

foo = 'Hello';
onsole.log(typeof foo); // string

foo = true;
onsole.log(typeof foo); // boolean

foo = null;
onsole.log(typeof foo); // object

foo = Symbol(); // 심벌
onsole.log(typeof foo); // symbol

foo = {}; // 객체
onsole.log(typeof foo); // object

foo = []; // 배열
onsole.log(typeof foo); // object

foo = function() {}; // 함수
onsole.log(typeof foo); // function
```

typeof 연산자로 변수를 연산하면 변수의 데이터 타입을 반환한다.
정확히 말하면 변수에 할당된 값의 데이터 타입을 반환한 것이다.

자바스크립트의 변수에는 어떤 데이터 타입의 값이라도 자유롭게 할당할 수 있으므로 정적 타입 언어에서 하는 데이터 타입과 개념이 다르다.
정적 타입 언어는 변수 선언 시점에 변수의 타입이 결정되고 변수의 타입을 변경할 수 없다.
자바스크립트에서는 값을 할당하는 시점에 변수의 타입이 동적으로 결정되고 변수의 타입을 언제든지 자유롭게 변경할 수 있다.


자바스크립트의 변수는 선언이 아닌 할당에 의해 타입이 결정(타입 추론(type inference)된다.
그리고 재할당에 의해 변수의 타입은 언제든지 동적으로 변할 수 있다.
이러한 특징을 동적 타이핑(dynamic typing)이라 하며, 자바스크립트를 정적 타입언어와 구별하기 위해 동적 타입(dynamic/weak type)언어라 한다.
대표적인 동적 타입 언어로는 자바스크립트, 파이썬, PHP, 루비, 리스프, 펄 등이 있다.

원래대로 돌아와서 변수는 타입은 가질까? 의 정답은 아니다 라는 것이다.
하지만 값은 타입을 가진다.

따라서 현재 변수에 할당되어 있는 값에 의해 변수의 타입이 동적으로 결정된다고 표현하는 것이 더 적절하다.
변수는 값에 묶여 있는 값에 대한 별명이기 때문이다.

동적 타입 언어와 변수

동적 타입 언어는 변수에 어떤 데이터 타입의 값이라도 자유롭게 할당할 수 있다.
데이터 타입에 대해 무감각해질 정도로 편리하다는 점이 장점이지만
편리함의 이면에는 위험이 도사리고 있다.

모든 소프트웨어 아키텍처에는 트레이드오프가 존재하며, 모든 애플리케이션은 적합한 은 탄환은 없듯이 동적 타입 언어 또한 구조적인 단점이 있다.

변수 값은 언제든지 변경될 수 있기에 복잡한 프로그래밍에서는 변수 값을 추적하기 어려울 수 있다.
그뿐만 아니라 변수 타입이 고정되지 앟고 동적으로 변하기 때문에 언제든지 변경될 수 있다.
따라서 동적 타입 언어의 변수는 값을 확인하기 전에는 타입을 확인할 수 없다.

더욱이 자바스크립트는 개발자의 의도와는 상관없이 자바스크립트 엔진에 의해 암묵적으로 타입이 자동으로 변환되기도 한다.
숫자 타입을 예측했지만 문자열 타입의 변수일 수도 있다는 말이다.

잘못된 예측에 의해 작성된 프로그램은 당연히 오류를 뿜어낼 것이다.
결국 동적 타입 언어는 유연성은 높지만 신뢰성은 떨어진다.

이러한 이유로 안정적인 프로그램을 만들기 위해 변수를 사용하기 이전에 데이터 타입을 체크해야 하는 경우가 있는데
이는 매우 번거로울뿐더러 코드의 양도 증가한다. 따라 변수를 사용할 때 주의할 사항은 다음과 같다.
- 변수는 꼭 필요한 경우에 한해 제한적으로 사용한다. 변수 값은 재할당에 의해 언제든지 변경될 수 있다. 이로 인해 타입을 잘못 예측해 오류가 발생할 가능성이 크다. 변수의 개수가 많으면 많을수록 오류의 확률은 증가한다. 따라서 변수의 무분별한 남발은 금물이며, 필요한 만큼 최소한으로 유지하도록 주의해야 한다.
- 전역 변수는 최대한 사용하지 않도록 한다. 어디서든지 참조/변경이 가능한 전역 변수는 의도치 않게 값이 변경될 가능성이 높고 다른 코드에 영향을 줄 가능성도 높다. 따라서 전역 변수는 프로그램의 복잡성을 증가시키고 처리 흐름을 추적하기 어렵게 만들고, 오류가 발생할 경우 오류의 원인을 특정하기 어렵게 만든다. 전역 변수의 문제점은 14장에서 확인해보자
- 변수보다는 상수를 사용해 값의 변경을 억제한다. 상수를 사용하는 방법은 15.3절 "const 키워드"에서 살펴보자.
- 변수 이름은 변수의 목적과 의미를 파악할 때 중요하다. 변수 이름뿐 아니라 모든 식별자(변수, 함수, 클래스 이름 등)는 존재 이유를 파악할 수 있는 네이밍이여야 한다. 특히 식별자의 유효 범위가 넓을수록 명확한 이름을 명명하자. 개발자의 의도를 나타내는 명확한 네이밍은 코드를 쉽게 만들고, 협업과 생산성의 도움을 준다. 이 부분이 제일 중요하다.

코드는 오해하지 않도록 작성해야 한다.(명확해야 한다.) 오해는 커뮤니케이션을 어렵게 하는 대표적인 원인이다.
코드는 동작이 목적이 아니라 개발자에게는 문서이기도 하다. 
따라서 사람이 이해할 수 있는 코드, 즉 가독성이 좋은 코드가 좋은 코드이다.


Typescript를 사용한다면 번거로움을 줄일 수 있다. 다만 번거로운 것을 마찬가지이니, 코드의 복잡도를 줄이는 것이 가장 좋다.
